
<style>
  /* General Styles */
body {
  background-color: #f8f9fa; /* Light background */
  font-family: Arial, sans-serif;
}

.container {
  max-width: 800px; /* Maximum width for the container */
  margin: auto;
  padding: 20px;
}

/* Heading Styles */
h1 {
  color: #343a40; /* Dark color for headings */
  margin-bottom: 20px;
}

/* List Group Styles */
.list-group {
  border-radius: 5px;
  overflow: hidden; /* Ensures no overflow on rounded corners */
}

.list-group-item {
  background-color: #ffffff; /* White background for items */
  border: 1px solid #dee2e6; /* Light border */
  padding: 15px; /* Padding inside list items */
  transition: background-color 0.3s; /* Smooth background transition */
}

.list-group-item:hover {
  background-color: #f1f1f1; /* Light gray on hover */
}

/* Button Styles */
.btn {
  margin-top: 10px; /* Space above buttons */
}

.btn-danger {
  background-color: #dc3545; /* Bootstrap danger color */
  border-color: #dc3545;
}

.btn-danger:hover {
  background-color: #c82333; /* Darker red on hover */
}

/* Order Summary Styles */
.order-summary {
  margin-top: 20px; /* Space above summary */
  font-size: 1.1em; /* Slightly larger font for emphasis */
  border-top: 2px solid #343a40; /* Top border for separation */
  padding-top: 10px; /* Padding above summary */
}

.order-summary strong {
  color: #007bff; /* Bootstrap primary color for totals */
}

/* Responsive Styles */
@media (max-width: 600px) {
  .btn {
    width: 100%; /* Full width for buttons on small screens */
  }

  .list-group-item {
    padding: 10px; /* Reduce padding on small screens */
  }
}

</style>



<div class="container mt-5">
  <h1 class="text-center mb-5">Your Order History</h1>
  <% if (orders.length > 0) { %>
  <div class="list-group">
    <% orders.forEach(order => { %>
    <div class="list-group-item mb-4">
      <h5>Order ID: <%= order._id %></h5>
      <p>Status: <strong><%= order.status %></strong></p>
      <p>Placed on: <%= order.createdAtFormatted %></p> <!-- Preformatted date -->

      <h6>Delivery Address:</h6>
      <p>
        <%= order.address.name %>, <%= order.address.city %>, <%= order.address.state %> - <%= order.address.pincode %>
      </p>

      <h6>Items:</h6>
      <ul class="list-group mb-3">
        <% order.items.forEach(item => { %>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <strong><%= item.productId.productName %></strong>
            <div>Quantity: <%= item.quantity %></div>
          </div>
          <span>Total: <%= item.totalPrice %> $</span>
        </li>
        <% }) %>
      </ul>

      <p><strong>Total Order Price: <%= order.totalOrderPrice %> $</strong></p> <!-- Precomputed total price -->

      <% if (order.status === 'Pending') { %> <!-- Show cancel button only for pending orders -->
      <form action="/order/cancel/<%= order._id %>" method="POST" class="d-inline" onsubmit="return confirmCancel();">
        <button type="submit" class="btn btn-danger btn-sm">Cancel Order</button>
      </form>
      <% } %>
    </div>
    <% }) %>
  </div>
  <% } else { %>
  <p class="text-center">No orders found.</p>
  <% } %>
</div>

<script>
  function confirmCancel() {
    return confirm("Are you sure you want to cancel this order?");
  }
</script>
